<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="//at.alicdn.com/t/font_1369125_2xawxep6qqv.css">
		<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
		<script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
		<script src="js/username.js"></script>
		<script src="layer/layer.js"></script>
		<title>TUR-Delegate Monitor</title>
	</head>
	<body>
		<div class="w100 m-dorp bg-fff fixed row jc-sb box-sd">
			<div class="w8 pic100 pad-b-1 box-sd">
				<img src="img/logo.png">
			</div>
			<div class="w84 m-ss fl ai-center row col-666">
				<a href="enindex.html" class="menu">
					<div class="text-center">
						<i class="iconfont m-none">&#xe60c;</i>
						<p>Home</p>
					</div>
				</a>
				<a href="entop-wallets.html" class="menu">
					<div class="text-center">
						<i class="iconfont m-none">&#xe60e;</i>
						<p>Top Wallets</p>
					</div>
				</a>
				<a href="endelegate-monitor.html" class="on menu">
					<div class="text-center">
						<i class="iconfont m-none">&#xe619;</i>
						<p>Delegate Monitor</p>
					</div>
				</a>				
				<a href="index.html" class="menu">
					<div class="text-center m-block">
						<p>中文</p>
					</div>
				</a>
				
				<div class="mar-r-b-8 row jc-end flex" >
					<input type="" placeholder="Find a block, transaction, address" name="" id="sltnamea" class="bor-rs2 pad-b-1 bor-f4f w50" />
					<button type="button" id="sousuoa" class="col-fff fz20 mar-l-b-1 bor-rs3 pad-b-1 pad-lr-b-3 bg-318"><i class="iconfont">&#xe63d;</i></button>
				</div>
			</div>
			<div class="w8 m-none dorp cursor pic100 pad-b-1 box-sd">
				<img src="img/en.png" >
				<div class="dorp_con box-sd pic100">
					<a href="index.html"><img src="img/cn.png"></a>
				</div>
			</div>
			<div class="w8 m-block text-center col-318 ai-center jc-center fz60 cursor pad-b-1 box-sd">
				<i class="iconfont">&#xe654;</i>
			</div>
			
				
		</div>
		<div class="split ">

		</div>
		<!-- 左侧 -->
		<div class="w8 box-sd fixed m-none h100">
			<div class="column text-center col-ccc fz20 mar-t300">
				<a href="https://www.facebook.com/TurretGlobal/"><i class="iconfont pad-tb20">&#xe638;</i></a>
				<a href="https://twitter.com/Turret4709"><i class="iconfont pad-tb20">&#xe89d;</i></a>
				<a href="https://www.weibo.com/u/7216873688"><i class="iconfont pad-tb20">&#xe63e;</i></a>
				<div class="drop">
						<i class="iconfont pad-tb20">&#xe635;</i>
						<div class="drop_con2 p100 a-fadein">
							<div class="xs">
								<img src="http://www.turc.io/public/webpic/20190828/c0924b25f84e09a4e9f02a9a6b193643.png">
								<div class="xsj z-100 mar-t10 mar-l35"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>





		<!-- 内容 -->
		<div class="w92 bg-f5f mar-t-b-8 mar-l-b-8">
			<div class="w100 pad-b-2">
				<div class="row wrap jc-sb">
					<div class="box-sd-dbe bor-t-dbe text-center pad-b-1 fz20 w29">
						Delegate Monitor
					</div>
					<div class="box-sd row wrap m-mar-t10 jc-sb pad-b-1 bor-t-e8e ai-center w68">
						<div class="col-666 m-w50" id="height">
							Height：<span v-cloak>{{height}}</span>
						</div>
						<div class="bor-r h-14 m-none"></div>
						<div class="col-666 m-w50">
							Network：TUR
						</div>
						<div class="bor-r h-14 m-none"></div>
						<div class="col-666 m-w50" id="app">
							Supply：<span v-cloak>{{supply/100000000}}€</span>
						</div>
						<div class="bor-r h-14 m-none"></div>
						<div class="col-666 m-w50" id="count" >
							Address：<span v-cloak>{{count}}</span>
						</div>
					</div>
				</div>

				<div id="transactions">
					<div class="box-sd mar-t-b-4 pad-b-2 bg-fff ">
						<div class="row m-wrap jc-sb ai-center">
							<div class="w18 row ai-center m-none col-fff bor-r">
								<div class="fz30 w50">
									<i class="iconfont iconfont2 bg-318 pad-b-15 bor-rs10 ">&#xe685;</i>
								</div>
								<div class="w30 col-666">
									<p class="text-center ">Delegates</p>
									<div class="text-center bold ccsl" id="daibaiomen">0</div>
								</div>
							</div>
							<div class="column m-w50 w22 pad-lr-b-3 col-666 bor-r">
								<p class="fz-18 text-left">Last block</p>
								<div class="text-left ccsl" v-cloak><a :href="'enblock.html?id='+datas.id">{{datas.id}}</a></div>
							</div>
							<div class="column w30 m-none pad-lr-b-3 col-666 bor-r">
								<p class="fz-18 text-left">Forged</p>
								<div class="text-left ccsl" v-cloak>{{datas.forged.total/100000000}} T from {{datas.transactions}} transactions</div>
							</div>
							<div class="column w15 m-w50 text-center col-666">
								<p class="fz-18 text-center">Delegate</p>
								<div class="bold text-center ccsl" v-cloak><a :href="'enwallet.html?id='+datas.generator.address">{{datas.generator.username}}</a></div>
							</div>

						</div>
					</div>


				</div>





				<!-- 头部切换 -->
				<div class="mar-t-b-4">
					<a href="javascript:jiaoyi(0);" class="Active col-666 pad-b-1 pad-lr-b-3 box-sd" style="background: #fff"><span>Active</span></a>
					<a href="javascript:qukuai(0);" class="Standby col-666 pad-b-1  pad-lr-b-3 mar-l-b-1 box-sd"><span>Standby</span></a>
				</div>
				<!-- 内容部分 -->
				<div id="Active" style="display: block">
					<div class="box-sd mar-t-b-1 pad-b-2 bg-fff">						
						<div class="row jc-sb col-318 bold">
							<div class="Hover w8">Rank</div>
							<div class="Hover w15">Username</div>
							<div class="Hover m-none">Forged blocks</div>
							<!-- <div class="Hover m-none">Last forged</div> -->
							<div class="Hover w15 m-none">Productivity</div>
							<div class="Hover w15 m-none">Votes</div>
						</div>						
						<div v-for="(data,i) in datas" class="row jc-sb zx">
							<div v-cloak class="Hover w8">{{i+1}}</div>
							<div v-cloak class="Hover w15"><a :href="'enwallet.html?id='+data.address">{{data.username}}</a></div>
							<div v-cloak class="Hover m-none">{{data.blocks.produced}}</div>
							<!-- <div v-cloak class="Hover m-none">{{getLocalTime(data.blocks.last.timestamp.unix)}}</div> -->
							<div v-cloak class="Hover w15 m-none">{{data.production.approval}}%</div>
							<div v-cloak class="Hover w15 m-none">{{data.votes/100000000}}€</div>
						</div>						
					</div>
				</div>
				<div id="Standby" style="display: none;">
					<div class="box-sd mar-t-b-1 pad-b-2 bg-fff">						
						<div class="row jc-sb col-318 bold">
							<div class="Hover w8">Rank</div>
							<div class="Hover w15">Username</div>
							<div class="Hover w15 m-none">Productivity</div>
							<div class="Hover w15 m-none">Votes</div>
						</div>						
						<div v-for="(data,i) in datas" class="row jc-sb zx">
							<div v-cloak class="Hover w8">{{31+i+1}}</div>
							<div v-cloak class="Hover w15"><a :href="'enwallet.html?id='+data.address">{{data.username}}</a></div>
							<div v-cloak class="Hover w15 m-none">{{data.production.approval}}%</div>
							<div v-cloak class="Hover w15 m-none">{{data.votes/100000000}}€</div>
						</div>						
					</div>		
				</div>

				<script src="js/enapp.js"></script>
				<script type="text/javascript">
					$(function() {
						$(".Active").on("click", function() {
							$('.Active').css('background', '#fff')
							$('#Active').css('display', 'block')
							$('#Standby').css('display', 'none')
							$('.Standby').css('background', '')
						});
						$(".Standby").on("click", function() {
							$('.Standby').css('background', '#fff')
							$('.Active').css('background', '')
							$('#Standby').css('display', 'block')
							$('#Active').css('display', 'none')
						});
					})
					window.onload = function() {


						vum2 = new Vue({
							el: '#transactions',
							data: {
								datas: "",
							},
							beforeCreate: function() {
								$.ajax({
									type: 'Get',
									url: server_url + "api/v2/blocks?limit=1",

									success: function(data) {
										vum2.datas = data.data[0];
									}
								})
							}
						})

						vum3 = new Vue({
							el: '#Active',
							data: {
								datas: "",
							},
							beforeCreate: function() {
								$.ajax({
									type: 'Get',
									url: server_url + "api/v2/delegates?limit=31",

									success: function(data) {
										vum3.datas = data.data;
										$("#daibaiomen").html(data.meta.totalCount)
									}
								})
							}
						})

						vum4 = new Vue({
							el: '#Standby',
							data: {
								datas: "",
							},
							beforeCreate: function() {
								$.ajax({
									type: 'Get',
									url: server_url + "api/v2/delegates?limit=31&page=2",

									success: function(data) {
										vum4.datas = data.data;
									}
								})
							}
						})
						t1 = setInterval(function() {
							transactions()
						}, 5000);
						t2 = setInterval(function() {
							active()
						}, 5000);
						t3 = setInterval(function() {
							standby()
						}, 5000);
					}


					function transactions() {
						$.ajax({
							type: 'Get',
							url: server_url + "api/v2/blocks?limit=1",

							success: function(data) {
								// vum2.datas = data.blocks[0];
								// console.log(vum2.datas)
								vum2.$set(vum2.$data, 'datas', data.data[0])
								vum2.$forceUpdate();
							}
						})
					}

					function active() {
						$('._Active').css('background', '#fff')
						$('._Standby').css('background', '')
						$.ajax({
							type: 'Get',
							url: server_url + "api/v2/delegates?limit=31",

							success: function(data) {
								// vum3.datas = data.delegates;
								// console.log(vum3.datas)
								vum3.$set(vum3.$data, 'datas', data.data)
								vum3.$forceUpdate();

								// var arry = data.data;
								// var strarr = [];
								// for (let i in arry) {
								//     strarr.push(arry[i]['blocks']['produced'])
								// };
								// console.log(eval(strarr.join('+'))) 
								

							}
						})
					}

					function standby() {
						$('._Standby').css('background', '#fff')
						$('._Active').css('background', '')
						$.ajax({
							type: 'Get',
							url: server_url + "api/v2/delegates?limit=31&page=2",

							success: function(data) {
								// vum4.datas = data.delegates;
								// console.log(vum4.datas)
								vum4.$set(vum4.$data, 'datas', data.data)
								vum4.$forceUpdate();
							}
						})
					}
				</script>


	</body>

</html>
